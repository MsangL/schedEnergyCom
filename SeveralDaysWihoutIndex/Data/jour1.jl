T=48
u=3
Pc=[5.000;3.7; 3.700 ;0 ;0; 0 ;0]                   # Puissances kW
Pd=[5.000;3.7; 3.700; 0 ;0; 0; 0]
M=2                                                  # maximum de schedule par tâche
fi=10                                                # nombre max de cycle des battéries
P_sous=[ 36 6 6 9 9 6 9 ]                             # puissance souscrite convertir
JA=2
JB=1
delta=1800
n=7
gamma=[9.8;9.8;9.8;0;0;0;0]                # Kwh
n=7                                                  # nombre de personnes
B=1                                                  # une batterie par personne
dist=1/2                                             # chaque 30 min 1/2h
c=0.975
d=0.975
xi=[0; 0;0;0; 0; 0; 0; 0]                      # charge initiale des batteries
xi0=[0; 0;0;0; 0; 0; 0; 0]                      # charge initiale des batteries
eta=0.99                                             # perte automatique
alpha=1                                              # pas de perte suivant la distance
M=2                                                  # maximum de schedule par tâche
fi=10                                                # nombre max de cycle des battéries
L=1
Pedf=0.1685 # prix d'achat au réseau edf euro/kWh
Pac=0.14     # prix d'achat dans la communauté euro/kWh
Pvc=0.12     # Prix de vente dans la communauté euro/kWh
oui=0.065   # prix de vente à planète oui euro/kWh
Pv=0.1        # prix de vente à edf lorsque pas dans une communauté euro/kWh

Nbp=3
u=1
tt=10

JobA= Array{Float64}(undef, (n,JA,Nbp,u))
JobA[:,:,1,1]=[0 1 ; 1 1 ; 1 1 ; 1 1 ;1 1 ;0 1 ;1 1 ]
JobA[:,:,2,1]=[0 0 ; 1 0 ; 0 0 ; 0 0 ;1 0 ;1 0 ;1 0 ]
JobA[:,:,3,1]=[0 0 ; 1 0 ; 1 0 ; 0 0 ;0 0 ;1 0 ;1 0 ]
#JobA=[individu,tâche de type A,la pièce]
#1 : chauffage
#2 : chauffe eau

# Puissance des appareils en kW type A

#Pa[invidu,device=job,la pièce,niveau de puissance]
Nbp=3


pow=4       # nombre max de puissance
Pa= Array{Float64}(undef, (n,JA,Nbp,pow))

Pa[:,:,1,4]=[3 3;3 3;3 3; 3 3; 3 3;3 3;3 3 ]
Pa[:,:,1,3]=[2 2;2 2;2 2; 2 2; 2 2;2 2;2 2 ]
Pa[:,:,1,2]=[1 1;1 1;1 1; 1 1; 1 1;1 1;1 1 ]
Pa[:,:,1,1]=[0 0;0 0;0 0;0 0;0 0;0 0;0 0]

Pa[:,:,2,4]=[3 3;3 3;3 3; 3 3; 3 3;3 3;3 3 ]
Pa[:,:,2,3]=[2 2;2 2;2 2; 2 2; 2 2;2 2;2 2 ]
Pa[:,:,2,2]=[1 1;1 1;1 1; 1 1; 1 1;1 1;1 1 ]
Pa[:,:,2,1]=[0 0;0 0;0 0;0 0;0 0;0 0;0 0]

Pa[:,:,3,4]=[3 3;3 3;3 3; 3 3; 3 3;3 3;3 3 ]
Pa[:,:,3,3]=[2 2;2 2;2 2; 2 2; 2 2;2 2;2 2 ]
Pa[:,:,3,2]=[1 1;1 1;1 1; 1 1; 1 1;1 1;1 1 ]
Pa[:,:,3,1]=[0 0;0 0;0 0;0 0;0 0;0 0;0 0]

# Les jobs de type B ont une durée et une consommation
Pb= Array{Float64}(undef, (n,T,JB,M,u))
#Pb[individu,temps,tache,schedule]
#1er sch
Pb[:,:,1,1,1]=[ [ 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0  0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]]
#2e sch
Pb[:,:,1,2,1]=[ [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0];[0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0]]


y0=[22 22 22 22 22 22 22;22 22 22 22 22 22 22;22 22 22 22 22 22 22]
y00=[22 22 22 22 22 22 22;22 22 22 22 22 22 22;22 22 22 22 22 22 22]
tmin=[20 19 20 20 21 20 19;20 19 20 20 20 20 19;20 19 20 20 20 20 19]
tmax=[25 25 25 25 25 25 25;25 25 25 25 25 25 25;25 25 25 25 25 25 25]
td=[34  34 34 34 34 34 34;34 34 34 34 34 34 34;34 34 34 34 34 34 34 ]
tf=[48 48 48 48 48 48 48;48 48 48 48 48 48 48;48 48 48 48 48 48 48]



Cm=[2970000 2970000 5940000 3960000 8250000 6105000 4950000;4950000 2970000 2970000 6600000 3300000 2970000 3300000;5940000 2970000 2970000 3960000 3960000 3300000 4620000]
U=[12 12 24 16 33.3 24.6 20;20 12 12 20 13.3 12 13.3;24.6 12 12 16 16 13.3 18.6]



ti=[15 17 18 19 10 10 8;15 17 18 19 10 10 8;15 17 18 19 10 10 8]



sc=28
ec=36
temp_min=55
temp_max=60
Ta=17
S=[ 7 1.5 2 3.75 2.4 2 2.6;7 1.5 2 3.75 2.4 2 2.6;7 1.5 2 3.75 2.4 2 2.6]
Masse=[ 350 75 100 200 150 100 150;350 75 100 200 150 100 150;350 75 100 200 150 100 150]
K=1
cpo=1
r=1.2

Yout=[24.0 23.95 23.9 23.9 23.9 23.7 23.5 22.8 22.1 21.85 21.6 22.25 22.9 23.8 24.7 25.5 26.3 27.05 27.8 29.15 30.5 30.85 31.2 31.45 31.7 31.6 31.5 31.65 31.8 32.55 33.3 32.8 32.3 31.3 30.3 29.85 29.4 28.45 27.5 26.9 26.3 26.0 25.7 25.25 24.8 24.55 24.3 24.15]

beta=0.15
omega=[1 1 0 1 1 1 0]
maxIterGC=10


prod1=[0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0194 0.1304 0.27555 0.4666 0.5403 0.678216666666667 0.739766666666667 1.54441666666667 1.80056666666667 2.61448333333333 3.79201666666667 5.1738 6.17726666666667 6.63855 6.05696666666667 7.11985 6.23383333333333 5.58705 4.57758333333333 4.585 3.86163333333333 5.0411 3.09425 4.42045 3.1478 1.34021666666667 0.460466666666667 0.3102 0.052816666666667 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0142 0.26365 0.520066666666667 0.866933333333333 1.31966666666667 1.4283 1.95923333333333 2.62658333333333 2.30138333333333 3.39151666666667 3.37456666666667 4.07696666666667 4.48971666666667 4.79875 4.43605 4.268 3.62063333333333 2.93526666666667 2.91373333333333 2.64168333333333 1.93615 2.66741666666667 1.67626666666667 1.51355 1.13768333333333 0.438216666666667 0.212133333333333 0.158266666666667 0.023483333333333 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 4.10485 3.8204 4.86148333333333 4.58665 4.46141666666667 4.0889 2.72823333333333 2.91613333333333 2.33415 2.48941666666667 2.09906666666667 1.4214 1.75823333333333 0.701316666666667 0.423966666666667 0.2768 0.024466666666667 0.0234 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.020033333333333 0.1707 0.64945 1.48951666666667 1.8731 1.96963333333333 2.55606666666667 3.28171666666667 2.16395 3.19093333333333 3.65076666666667 3.98293333333333 4.3581 4.62956666666667 4.0626 4.35733333333333 3.3913 2.74336666666667 2.68076666666667 2.42008333333333 1.85443333333333 2.19641666666667 1.34326666666667 1.45676666666667 0.744366666666667 0.423466666666667 0.22675 0.168166666666667 0.021583333333333 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0; 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0]

p=[1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0; 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0 1.0]
beta=0.15
omega=[1 1 0 1 1 1 0]
maxIterGC=10

